/* Arabic Font Support */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap');

:root{--ink:#111827;--muted:#6b7280;--border:#e5e7eb;--bg:#f7f7f8;--card:#fff;--green:#16a34a;--green-bg:#dcfce7;--red:#b91c1c;--red-bg:#fee2e2;--yellow:#b45309;--yellow-bg:#fef3c7}

/* Global Typography with Arabic Support */
*{box-sizing:border-box}
/* Default body font supports both languages */
body{font-family:'Tajawal','Noto Sans Arabic','Segoe UI',Arial,sans-serif;margin:0;background:var(--bg);color:var(--ink)}
/* Explicit language-specific fonts */
[lang="en"], .en-content{font-family:system-ui,Segoe UI,Arial,sans-serif !important}
[lang="ar"], .ar-content{font-family:'Tajawal','Noto Sans Arabic',Arial,sans-serif !important}
/* Ensure Arabic text has proper character spacing and line height */
[lang="ar"], .ar-content {
    letter-spacing: 0;
    word-spacing: 0;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* RTL and LTR Direction Support */
html[dir="rtl"], body.rtl {
    direction: rtl;
    text-align: right;
}
html[dir="ltr"], body.ltr {
    direction: ltr;
    text-align: left;
}

/* Mixed content handling */
.mixed-content {
    unicode-bidi: plaintext;
    text-align: start;
}

.header{background:#cbd5e1;color:#0f172a;padding:10px 14px;border-bottom:1px solid var(--border)}
.header .bar{display:flex;align-items:center;gap:10px}
.header .start,.header .end{flex:1;display:flex;align-items:center;gap:8px}
.header .center{flex:0 0 auto;text-align:center;font-weight:700}
.header .title{font-size:16px}
.header a{color:#1e40af;text-decoration:none;border:1px solid #60a5fa;border-radius:999px;padding:6px 12px;white-space:nowrap;background:#bfdbfe}
.header a.secondary{background:#fff}
.kebab{position:relative}
.kebab-btn{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border:1px solid #60a5fa;border-radius:10px;background:#bfdbfe;cursor:pointer}
.kebab-menu{position:absolute;top:42px;min-width:220px;border:1px solid var(--border);border-radius:10px;background:#fff;box-shadow:0 6px 18px rgba(0,0,0,.08);padding:8px;display:none;z-index:999}
.kebab.open .kebab-menu{display:block}
.kebab-menu a{display:block;margin:4px 0;color:#1e40af;border:1px solid #60a5fa;border-radius:10px;padding:6px 10px;background:#ffffff}
body.rtl .bar{flex-direction:row-reverse}
body.rtl .start,body.rtl .end{flex-direction:row-reverse}
body.rtl .kebab .kebab-menu{right:0;left:auto}
html[dir="rtl"] .kebab .kebab-menu{right:0;left:auto}
.wrap{max-width:1100px;margin:20px auto;padding:0 12px;overflow-x:hidden}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:0 2px 6px rgba(0,0,0,.04);margin-bottom:14px;overflow:hidden}
.row{display:flex;gap:8px;flex-wrap:wrap}
.row>*{flex:1}
input,select,textarea{padding:10px;border:1px solid var(--border);border-radius:10px;background:#fff;max-width:100%}
/* Input text alignment based on language */
input[type="text"], input[type="search"], textarea {
    text-align: start;
}
[dir="rtl"] input[type="text"], [dir="rtl"] input[type="search"], [dir="rtl"] textarea {
    text-align: right;
}
textarea{resize:none}
button,.btn{display:inline-flex;align-items:center;justify-content:center;white-space:nowrap;text-align:center;line-height:1.2;background:#bfdbfe;color:#1e40af;border:1px solid #60a5fa;padding:8px 12px;border-radius:10px;text-decoration:none;cursor:pointer;max-width:100%;flex-shrink:0}
.btn.secondary{background:#fff;color:#111827}
.btn.danger{background:#ef4444;border-color:#dc2626;color:#000;font-weight:700}
.grid{display:grid;gap:8px}
.back-left{margin-right:auto}
.back-link{border:1px solid #374151;background:transparent;color:#fff;border-radius:999px;padding:6px 12px;white-space:nowrap}
.grid.sheet{grid-template-columns:repeat(6,minmax(0,1fr));grid-auto-rows:minmax(42px,auto);align-items:stretch}
.grid .h{background:#f3f4f6;padding:8px;border-radius:8px;font-weight:600;text-align:center}
.grid .c{background:#fff;padding:8px;border-radius:8px;border:1px solid var(--border);overflow-wrap:anywhere;word-break:break-word;text-align:center}
.grid.excel{width:100%;max-width:100%;grid-template-columns:repeat(9,minmax(0,1fr));grid-auto-rows:minmax(52px,auto);align-items:start}
.grid.excel .h{text-align:center}
.grid.excel .c{padding:0;border-radius:8px;display:flex;flex-direction:column;align-items:stretch;border:1px solid var(--border);background:#fff;min-width:0;text-align:center}
.grid.excel .c>input,.grid.excel .c>select,.grid.excel .c>textarea{flex:0 0 auto;width:100%;min-width:0;max-width:100%;border:0;background:transparent;padding:10px;border-radius:8px;display:block;overflow-wrap:anywhere;word-break:break-word;font-size:14px;line-height:1.25;text-align:center}
.grid.excel .c>input[readonly]{background:#fff}
.grid.excel .c>textarea{min-height:42px;overflow:hidden}
.grid.excel .c>select{font-size:13px}
.bonus-inline{font-size:12px;color:#374151;margin-top:4px}
.bal-box{font-variant-numeric:tabular-nums;text-align:center;border-radius:8px;padding:8px 10px;border:1px solid var(--border)}
.bal-0{background:var(--green-bg);color:#16a34a;border-color:#bbf7d0}
.bal-pos{background:var(--red-bg);color:#b91c1c;border-color:#fecaca}
.payment-item{position:relative;border:1px solid var(--border);border-radius:16px;background:#fff;margin-bottom:10px;overflow:hidden}
.payment-item.ok{border-color:#bbf7d0;background:#f6fffb}
.payment-item.ok::before{content:'';position:absolute;left:0;top:0;bottom:0;width:6px;background:#16a34a}
.payment-item.due{border-color:#fecaca;background:#fff7f7}
.payment-item.due::before{content:'';position:absolute;left:0;top:0;bottom:0;width:6px;background:#b91c1c}
.payment-summary{display:flex;gap:12px;align-items:center;padding:12px 12px 12px 18px;flex-wrap:wrap}
.badge{padding:4px 10px;border-radius:999px;border:1px solid var(--border);background:#fff}
.mini-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;align-items:center}
.mini-grid .th{font-size:.75rem;color:#6b7280;text-transform:uppercase;text-align:center}
.mini-grid .tv{font-variant-numeric:tabular-nums;background:#f3f4f6;border:1px solid var(--border);border-radius:8px;padding:6px 10px;text-align:center}
.payment-details{display:none;border-top:1px solid var(--border);padding:12px}
.payment-details .detail-line{margin:6px 0;text-align:center}
.payment-details .val{display:block;white-space:pre-wrap;word-break:break-word;overflow-wrap:anywhere;text-align:center}
@media (max-width:1100px){
  .grid.sheet{grid-template-columns:repeat(2,minmax(0,1fr))}
  .grid.excel{grid-template-columns:repeat(2,minmax(0,1fr))}
}
html[dir="rtl"] .header .kebab .kebab-menu{right:0 !important;left:auto !important}
html[dir="rtl"] .back-btn{justify-content:center}
.header .bar{display:flex;align-items:center}
.header .start{flex:1;display:flex;align-items:center;gap:8px;order:0;justify-content:flex-start}
.header .center{flex:0 0 auto;text-align:center}
.header .end{flex:1;display:flex;align-items:center;gap:8px;order:2;justify-content:flex-end}
html[dir="rtl"] .header .start{order:2;justify-content:flex-end}
html[dir="rtl"] .header .end{order:0;justify-content:flex-start}
.kebab{position:relative}
.kebab.open .kebab-menu{display:block}
.kebab-menu{position:absolute;top:100%;margin-top:6px;min-width:220px;border:1px solid var(--border);border-radius:10px;background:#fff;box-shadow:0 6px 18px rgba(0,0,0,.08);padding:8px;display:none;z-index:9999;left:0;right:auto}
html[dir="rtl"] .kebab .kebab-menu{left:auto;right:0}
.header .bar{position:relative;display:flex;align-items:center}
.header .center{position:absolute;left:50%;transform:translateX(-50%);text-align:center}
.header .start,.header .end{flex:1;display:flex;align-items:center;gap:8px}
.header .start .kebab{order:0}
.header .start .back-btn,.header .start .home-btn{order:1}
html[dir="rtl"] .header .start{order:2;justify-content:flex-end}
html[dir="rtl"] .header .end{order:0;justify-content:flex-start}
html[dir="rtl"] .header .start .kebab{order:2}
html[dir="rtl"] .header .start .back-btn,html[dir="rtl"] .header .start .home-btn{order:0}
.kebab{position:relative}
.kebab-menu{position:absolute;top:100%;margin-top:6px;min-width:220px;border:1px solid var(--border);border-radius:10px;background:#fff;box-shadow:0 6px 18px rgba(0,0,0,.08);padding:8px;display:none;z-index:9999;left:0;right:auto}
.kebab.open .kebab-menu{display:block}
html[dir="rtl"] .kebab .kebab-menu{left:auto;right:0}
html[dir="rtl"] .header .end{order:0 !important;justify-content:flex-start !important}
.flash-message{background:#ecfdf5;color:#065f46;border:1px solid #a7f3d0;padding:10px;border-radius:10px;margin-bottom:10px;text-align:center}
.flash-message[data-category="err"]{background:#fee2e2;color:#b91c1c;border-color:#fecaca}
.appointment-hero{display:flex;justify-content:space-between;align-items:flex-start;gap:20px;background:linear-gradient(135deg,#dbeafe,#ede9fe);border:0;box-shadow:none}
.appointment-hero .eyebrow{text-transform:uppercase;color:#1d4ed8;font-size:12px;letter-spacing:1px;margin-bottom:4px}
.appointment-hero h1{margin:0;font-size:28px}
.appointment-hero .filters{display:flex;gap:12px;flex-wrap:wrap;align-items:flex-end}
.appointment-hero label{display:flex;flex-direction:column;font-size:12px;color:#475569;text-transform:uppercase;letter-spacing:.08em}
.appointment-hero input,.appointment-hero select{min-width:160px}
.appointment-hero .filter-actions{display:flex;gap:8px}
.appointment-stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px}
.appointment-stats .stat-tile{background:#f8fafc;border-radius:16px;padding:16px;text-align:center;border:1px dashed #dbeafe}
.stat-label{font-size:12px;color:#64748b;text-transform:uppercase;letter-spacing:.08em}
.stat-value{font-size:26px;font-weight:700;color:#0f172a}
.timeline-grid{display:flex;flex-direction:column;gap:14px}
.timeline-hour{border:1px solid var(--border);border-radius:16px;padding:12px;background:#fff}
.hour-label{font-weight:600;color:#94a3b8;margin-bottom:8px}
.appt-card{border:1px solid #e2e8f0;border-radius:16px;padding:12px;margin-bottom:10px;background:#f8fafc;box-shadow:0 6px 20px rgba(15,23,42,.06)}
.appt-card:last-child{margin-bottom:0}
.appt-card .appt-head{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;margin-bottom:8px}
.appt-title{font-size:16px;font-weight:600}
.appt-patient{font-size:13px;color:#475569}
.appt-time{font-variant-numeric:tabular-nums;color:#0f172a;font-weight:600}
.appt-body{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:8px}
.appt-body .pill{background:#fff;border:1px solid #cbd5f5;border-radius:999px;padding:4px 10px;font-size:12px;color:#1d4ed8}
.appt-body .notes{width:100%;font-size:13px;color:#475569;background:#fff;border-radius:12px;padding:8px;border:1px dashed #e2e8f0}
.appt-footer{display:flex;gap:8px;align-items:center}
.appt-footer select{flex:1}
.appt-card.status-done{background:#ecfeff;border-color:#a5f3fc}
.appt-card.status-in_progress{background:#fef9c3;border-color:#fde68a}
.appt-card.status-cancelled{background:#fee2e2;border-color:#fecaca}
.empty-hour{padding:16px;text-align:center;color:#94a3b8;border:1px dashed #e2e8f0;border-radius:12px}
.appointment-form .form-grid,.receipt-form .form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
.appointment-form label,.receipt-form label{display:flex;flex-direction:column;font-size:13px;color:#475569;gap:6px}
.appointment-form textarea,.receipt-form textarea{min-height:120px;text-align:left}
.appointment-form .form-actions,.receipt-form .form-actions{margin-top:20px;display:flex;gap:10px;flex-wrap:wrap}
.appointment-form input,.appointment-form select,.receipt-form input,.receipt-form select{width:100%}
.receipt-hero{display:flex;align-items:center;justify-content:space-between;gap:12px}
.receipt-hero .eyebrow{color:#475569;text-transform:uppercase;font-size:12px;letter-spacing:.08em}
.receipt-table table{width:100%;border-collapse:collapse}
.receipt-table th,.receipt-table td{padding:10px;border-bottom:1px solid #e5e7eb;text-align:center}
.receipt-table td.actions{display:flex;gap:8px;justify-content:center;align-items:center}
.receipt-table form{margin:0}
.appt-snippet{display:flex;justify-content:space-between;align-items:center;padding:10px 14px;border:1px solid #e2e8f0;border-radius:12px;background:#f8fafc}

/* Table Styling for Admin Users and other admin tables */
table{width:100%;border-collapse:collapse;background:#fff}
table th, table td{padding:12px 8px;border-bottom:1px solid #e5e7eb;text-align:left;vertical-align:top}
table th{background:#f8fafc;font-weight:600;color:#374151;text-transform:uppercase;font-size:12px;letter-spacing:.05em;position:sticky;top:0;z-index:10}
table tbody tr:hover{background:#f9fafb}
table tbody tr:nth-child(even){background:#fafafa}
table tbody tr:nth-child(even):hover{background:#f3f4f6}

/* Responsive table handling */
.overflow-x-auto{overflow-x:auto;width:100%}

/* Table actions alignment */
table td.actions{white-space:nowrap;text-align:right}
table td.actions .btn{margin-left:4px}

/* Print Receipt Button Enhancements */
.print-receipt-btn {
    background: #059669;
    color: white;
    border-color: #047857;
    font-weight: 500;
}
.print-receipt-btn:hover {
    background: #047857;
    border-color: #065f46;
}
.format-btn {
    background: #6b7280;
    color: white;
    border-color: #4b5563;
    font-size: 11px;
    padding: 4px 8px;
}
.format-btn:hover {
    background: #4b5563;
}

/* Arabic text specific styles */
.arabic-text {
    font-family: 'Tajawal', 'Noto Sans Arabic', Arial, sans-serif;
    direction: rtl;
    text-align: right;
    line-height: 1.8;
    letter-spacing: 0;
}

/* Mixed language content */
.mixed-language {
    unicode-bidi: isolate;
}

/* Payment Actions Layout */
.payment-actions {
    display: flex;
    gap: 8px;
    align-items: center;
    flex-wrap: wrap;
}

@media (max-width:700px){
  .appointment-hero{flex-direction:column}
  .appointment-hero .filters{align-items:stretch}
  .receipt-table td.actions{flex-direction:column}
  table{font-size:14px}
  table th, table td{padding:8px 6px}
}

/* RTL Specific Adjustments */
[dir="rtl"] {
    text-align: right;
}

[dir="rtl"] .header .center {
    left: auto;
    right: 50%;
    transform: translateX(50%);
}

[dir="rtl"] .back-left {
    margin-left: auto;
    margin-right: 0;
}

[dir="rtl"] .appt-head {
    flex-direction: row-reverse;
}

[dir="rtl"] .mini-grid {
    direction: ltr;
}

[dir="rtl"] input, [dir="rtl"] select, [dir="rtl"] textarea {
    text-align: right;
}

/* Fix for number alignment in RTL */
[dir="rtl"] .bal-box,
[dir="rtl"] .mini-grid .tv {
    direction: ltr;
    text-align: center;
}

/* Ensure proper spacing for Arabic text */
.arabic-section {
    padding: 8px 16px;
    border-radius: 8px;
    background: rgba(59, 130, 246, 0.05);
    margin: 8px 0;
}

/* Additional RTL Improvements */

/* Payment summary layout for RTL */
[dir="rtl"] .payment-summary {
    flex-direction: row-reverse;
}

[dir="rtl"] .payment-summary-left {
    flex-direction: row-reverse;
}

[dir="rtl"] .financial-data {
    margin-left: 0;
    margin-right: auto;
}

/* Mini-grid RTL adjustments */
[dir="rtl"] .mini-grid {
    direction: ltr;
}

[dir="rtl"] .mini-grid .tv,
[dir="rtl"] .mini-grid .th {
    text-align: center;
}

/* Payment actions layout */
[dir="rtl"] .payment-actions {
    flex-direction: row-reverse;
}

/* Navigation RTL fixes */
[dir="rtl"] .payments-header {
    flex-direction: row-reverse;
}

[dir="rtl"] .payments-title {
    text-align: center;
}

[dir="rtl"] .new-payment-btn {
    margin-left: 0;
    margin-right: auto;
}

/* Payment details RTL */
[dir="rtl"] .payment-details {
    text-align: right;
}

[dir="rtl"] .detail-line {
    direction: rtl;
}

[dir="rtl"] .detail-line .val {
    direction: ltr;
    display: inline-block;
}

/* Badge and date styling */
[dir="rtl"] .payment-date {
    margin-left: 8px;
    margin-right: 0;
}

/* Language toggle RTL */
[dir="rtl"] .lang-toggle {
    flex-direction: row-reverse;
}

/* Format buttons RTL */
[dir="rtl"] .format-buttons {
    flex-direction: row-reverse;
}
/* Shared schedule modal styles */
.schedule-modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:2000}
.schedule-modal.open{display:flex}
.schedule-modal__backdrop{position:absolute;inset:0;background:rgba(15,23,42,.55)}
.schedule-modal__panel{position:relative;background:#fff;border-radius:16px;padding:24px;width:min(500px,90%);max-height:90vh;overflow-y:auto;box-shadow:0 30px 70px rgba(15,23,42,.4);z-index:1}
.schedule-modal__header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.schedule-modal__close{background:none;border:none;font-size:24px;cursor:pointer;color:#475569}
.schedule-modal__body dl{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px}
.schedule-modal__body dt{font-weight:600;color:#475569}
.schedule-modal__body dd{margin:0}
.modal-section{margin-top:20px}
.modal-schedule-list{display:flex;flex-direction:column;gap:12px}
.modal-schedule-item{border:1px solid #e2e8f0;border-radius:12px;padding:12px}
.modal-schedule-item__chips{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
.info-chip.status-pill{border-color:#bbf7d0;background:#dcfce7;color:#166534}
.info-chip.info-chip--tiny{font-size:.72rem;padding:4px 10px}
.btn-link{color:#2563eb;text-decoration:none;font-weight:500}
.btn-link:hover{text-decoration:underline}
